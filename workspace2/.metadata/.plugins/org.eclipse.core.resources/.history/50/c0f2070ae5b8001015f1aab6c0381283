
#include "conf.h"
#include <stm32f4xx.h>

// ---------- Class ----------
// -------- Variables --------
// ----------- Main -----------
uint8_t SPI_Receive_Data(uint8_t);
void delay_ms(volatile uint32_t);
int main(void){
	config();
	while(1){
		if(SPI1->SR & SPI_SR_RXNE){
			uint8_t aux = SPI1->SR;
			if(aux == LED_ON){
				GPIOC->BSRR = (1<<13);
				else
					GPIOC->BSRR=(1<<(2*13));
			}

		}
	}


}

uint8_t SPI_Receive_Data(uint8_t dataTX){
	while(!(SPI1->SR & SPI_SR_TXE));
	SPI->DR = dataTX;
	while(!(SPI1->SR & SPI_SR_RXNE));
	uint8_t dataRX=SPI->DR;
	while(!(SPI1->SR & SPI_SR_BSY));
	return dataRX;
}
void delay_ms(volatile uint32_t ms){
	while(ms--){
		for(volatile uint32_t i =0; i<8000;i++){
			__NOP();
		}

	}

}
