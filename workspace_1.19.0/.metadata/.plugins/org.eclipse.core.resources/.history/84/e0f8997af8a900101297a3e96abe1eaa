#include "conf.h"
/*


/*----- Configuration -----*/
void confRCC(void){
    RCC->AHB1ENR |= (1<<4); // GPIOE
    RCC->APB2ENR |= (1<<0); //TIM1

}
void confGPIO(void){//PE8CH1N PE9CH1
    GPIOE->MODER |=(10<<8);
                  //TIM CH1
    GPIOE->AFR[1] |=(1<<4);//PE9
    GPIOE->AFR[1] |=(1<<0);//PE8

}

void confTIMER(void)
{
    TIM2->PSC = 1;
                /* CH1      CH2*/
    TIM2->CCMR1 |=(6<<4)|(6<<12); // Enable PWM
    //TIM2->CCMR1 |=(1<<3)|(1<<11); // Preload
    TIM2->CCER  |=(1<<0) |(1<<4);

    TIM2->ARR  =65535; /*8.2 mS*/

    TIM2->CCR1= 32768;//DUTYCYCLE 50% CHANEL1
    TIM2->CCR2 =32768;//pwm duty cycle 50% CHANEL 2

    }


void delay_ms(uint32_t delay){
	for(uint32_t i=0;i<delay;i++){
	for(uint32_t j=0;j<11500;j++);

	}

}


void config(void){
    confRCC();
    confGPIO();
    confTIMER();
}
