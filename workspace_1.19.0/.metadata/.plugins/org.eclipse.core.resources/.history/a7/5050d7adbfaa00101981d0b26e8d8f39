#include "conf.h"
/*


/*----- Configuration -----*/
void confRCC(void){
    RCC->AHB1ENR |= (1<<4); // GPIOE
    RCC->APB2ENR |= (1<<0); //TIM1

}
void confGPIO(void){//PE8CH1N PE9CH1
    GPIOE->MODER |=(10<<8);
                  //TIM CH1
    GPIOE->AFR[1] |=(1<<4);//PE9
    GPIOE->AFR[1] |=(1<<0);//PE8

}

void confTIMER(void)
{
    TIM1->PSC = 1;
                /* CH1      CH2*/
    TIM1->CCMR1 |=(6<<4); // Enable PWM
    TIM1->CCER  |=(1<<0) |(1<<4);

    TIM1->ARR  =363; //44KHz

    TIM1->CCR1= 289;//DUTYCYCLE 80% CHANEL1
    }


void delay_ms(uint32_t delay){
	for(uint32_t i=0;i<delay;i++){
	for(uint32_t j=0;j<11500;j++);

	}

}


void config(void){
    confRCC();
    confGPIO();
    confTIMER();
}
